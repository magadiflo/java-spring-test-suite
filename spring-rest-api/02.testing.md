# ðŸ§ª Fase 2 â€” ImplementaciÃ³n de Pruebas (JUnit & Mockito)

El objetivo de esta fase es garantizar la calidad, confiabilidad y consistencia del sistema mediante la implementaciÃ³n
de pruebas unitarias e integradas, asegurando que cada componente del proyecto funcione de forma aislada y tambiÃ©n
correctamente en conjunto.

---

## âš™ï¸ ConfiguraciÃ³n Previa

Antes de comenzar con las pruebas, realizaremos algunos ajustes bÃ¡sicos para preparar un entorno de test limpio,
aislado y reproducible.

### ðŸ§¹ Eliminando la clase de prueba creada automÃ¡ticamente

Cuando generamos un nuevo proyecto con `Spring Boot`, el asistente crea por defecto una clase de prueba bÃ¡sica como
esta:

````java

@SpringBootTest
class SpringRestApiApplicationTests {
    @Test
    void contextLoads() {
    }
}
````

ðŸ” Detalles importantes:

- El nombre de la clase coincide con el nombre principal de la aplicaciÃ³n.
- El mÃ©todo `contextLoads()` estÃ¡ anotado con `@Test`, indicando que es una prueba de `JUnit 5`.
- La anotaciÃ³n `@SpringBootTest` indica que se cargarÃ¡ el `contexto completo de Spring` para la prueba.
  > MÃ¡s adelante analizaremos en detalle quÃ© hace exactamente esta anotaciÃ³n y cuÃ¡ndo conviene usarla.

âš ï¸ Por ahora, como vamos a enfocarnos en las `pruebas unitarias puras` (sin contexto de Spring), *eliminaremos
esta clase generada automÃ¡ticamente.* Esto nos permitirÃ¡ comenzar con nuestras propias clases de prueba bien
estructuradas y especÃ­ficas.

### ðŸ§¾ Creando archivo de configuraciÃ³n por defecto `application.yml`

Para evitar posibles conflictos con los archivos de configuraciÃ³n del entorno principal (`src/main/resources`),
es recomendable definir un archivo de configuraciÃ³n `por defecto para los tests`.

ðŸ“ Ruta recomendada: `src/test/resources/application.yml`

ðŸ§© Contenido inicial:

````yml
spring:
  application:
    name: spring-rest-api
````

ðŸ” ExplicaciÃ³n:

- Este archivo define un contexto bÃ¡sico para las pruebas.
- Si alguna prueba intenta acceder a propiedades de configuraciÃ³n, `Spring Boot` tomarÃ¡ este archivo
  `desde el entorno de test`, en lugar de usar los definidos en `src/main/resources`.
- Esto previene errores por configuraciones incorrectas o no deseadas al ejecutar pruebas.

> âš ï¸ Si no se define un archivo `application.yml` en `src/test/resources`, Spring Boot usarÃ¡ el de `src/main/resources`
> durante las pruebas. Esto puede provocar que las pruebas accedan a configuraciones reales, como bases de datos o
> servicios externos. Por eso, crear un archivo de configuraciÃ³n aislado para tests es una prÃ¡ctica recomendada para
> proteger el entorno y evitar errores.

ðŸ’¡ RecomendaciÃ³n:
> MÃ¡s adelante, se puede definir un archivo `application-test.yml` con configuraciones especÃ­ficas para
> pruebas de integraciÃ³n (como base de datos embebida, puerto aleatorio, etc.), y activarlo mediante
> `@ActiveProfiles("test")` en la clase de prueba o con la propiedad `spring.profiles.active=test` en el
> archivo `application.yml` del entorno de `test`. Esto permite mayor control y aislamiento por tipo de prueba.
